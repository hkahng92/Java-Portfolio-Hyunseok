# U2 M2 Summative Design


### Project Purpose
From this summative, I have demonstrated my ability to use queues, edge services, Feign Clients, caching, config servers and Eureka to create a stripped down version of social media service, Stwitter. As system design has shown, user(s) will utilize the service through Stwitter service only. 

### General Requirements I have followed:
1. All services are using the Config Server for their configuration settings.
2. All services are registered with Eureka.
3. All web service to web service communication are done using a Feign client.
4. All services have a complete set of unit/integration tests.
   - Post Service & Comment Service have DAO tests
⋅  
   - Stwitter Service has a Service Layer test.
5. Data must be cached as appropriate.
   - Post Service & Comment Service have caching.
⋅  
### Testing Method
When the user is creating the post using the Stwitter service, user must enter the post, post date, poster name, and have the option to input list of comments which has create date, commenter name and comment. Example below.


##### How to test Stwitter Service
###### Post with comment(s)
```
path: POST http://localhost:8889/posts

 {
   "post":"Family Photo",
   "postDate": "2019-11-10",
   "posterName": "LBJ JR",
        "comments":[
            { 
            "createDate": "2019-11-02",
            "commenterName" : "Zhaire Wade.",
            "comment": "What about our family?"
            }
            ,
            { 
            "createDate": "2019-11-03",
            "commenterName" : "Kobe",
            "comment":"I'm family too."
            }
            ]
}
```

###### Post without a comment
```
path: POST http://localhost:8889/posts

 {
   "post":"Family Photo",
   "postDate": "2019-11-10",
   "posterName": "LBJ JR",
        "comments":[]
}
```

###### Search by ID and Search by the Poster Name
```
path: GET http://localhost:8889/posts/{id}

path: GET http://localhost:8889/posts/user/{poster_name}
```

##### Testing Exception Handling
I have placed validation rules and catching/throwing exceptions on all services.

Note: I have placed the validation rule on post and comment properties because creating Post and/or Comment Object makes sense with those two properties, which are essential parts to those objects.

##### Exceptions that are handled (High Level) - In Stwitter Service (But all services do contain exception handlers)
###### Inputting Values in Post
1. Cannot place empty string or null on post date. Also must match the yyyy-mm-dd format.
2. Cannot place empty string or null on poster Name.
3. Cannot place empty string or null on post
###### Inputting Values in Comment - In Stwitter Service
1. Cannot place empty string or null on create date. Also must match the yyyy-mm-dd format.
2. Cannot place empty string or null on commenter name.
3. Cannot place empty string or null on comment. 
###### Searches - In Stwitter Service
1. Exception handled when a user is trying to find a post with post ID that does not exist.
2. Exception handled when a user is trying to find post(s) with poster name that does not exist.

### Component Specifications

#### Stwitter Service (Post and Comment Specification)

```
Post:
int: post ID
String: post content
LocalDate: post date
String: poster name
List<Comment>: comments

Comment:
int: comment ID
int: post id
String: commenter name
LocalDate: comment date
String: comment content
```
#### REST API
```
Create Post
===========
URI: /posts
HTTP Method: POST
RequestBody: Post data (minus ID)
ResponseBody: Post data (including autogenerated ID)

Get Post
========
URI: /posts/{id}
HTTP Method: GET
RequestBody: None
ResponseBody: Post data

Get Posts for Poster
====================
URI: /posts/user/{poster_name}
HTTP Method: GET
RequestBody: None
ResponseBody: Array of Post data

```

#### Comment Service & Post Service
Both comment service and post service contain CRUD functionality.

#### Ports for the Services

Config Server            - port 1999

Eureka Service Registry  - port 8761

Stwitter Service         - port 8889

Post Service             - port 1777

Comment Service          - port 6868

Comment Queue Consumer   - port 1333
